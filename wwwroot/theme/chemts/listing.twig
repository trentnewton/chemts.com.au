{% extends 'layouts/_default.twig' %}
{% block main %}

<main id="main" class="listing-index">
	<div class="row column">

		{# This template is used for 'listings': Generic pages that list a number of
	       records from a certain contenttype. These records are available as an array
	       called 'records'. In the for-loop below, we iterate over the records that
	       are on this page. It can be used for overview pages like 'all entries', or
	       'all records tagged with kittens' as well as search result. #}

		{# if used for listing a taxonomy: #}
		{% if taxonomytype is defined %}
			<h1>
				{{ __('Overview for') }}
				{% if taxonomy.options[slug] is defined %}
					{{ taxonomy.options[slug] }}
				{% else %}
					{{ slug }}
				{% endif %}
			</h1>
	        {# taxonomies are fetched unordered by design except if has_sortorder set true. #}
	        {%  if (not taxonomy.has_sortorder) %}
	            {# If we specified an order in config.yml, sort them here: #}
	            {% set records = records|order(app.config.get('general/listing_sort')) %}
	        {% endif %}
		{% endif %}

	    {# This is also the default template for searchresults. If 'search' is defined,
	       we display an appropriate title. The 'records' array contains all of the
	       records matching the current query. If there are no results, the
	       code in the 'else' part of the for-loop is used. #}
	    {% if search is defined %}
	        <h1>
	            {{ __('Search results for <b> %search% </b>.', { '%search%': search|escape }) }}
	        </h1>
	    {% endif %}

		<table class="">
			<thead>
				<tr>
					<th scope="col">{{ __('Product Name') }}</th>
					<th scope="col">{{ __('Date Issued') }}</th>
					<th scope="col">{{ __('Download') }}</th>
				</tr>
			</thead>
			<tbody>

				{% for record in records|order('slug') %}
					<tr>
						<td>{{ record.title }}</td>
						<td>{{ record.date_issued }}</td>
						<td><a class="download" title="{{ __('Download') }}" href="{{ paths.root }}files/{{ record.attachment }}"><svg class="icon icon-download" width="1em" height="1em"><use xlink:href="#icon-download"></use></svg></a></td>
					</tr>

				{% else %}

				{% endfor %}
			</tbody>
		</table>

		{# If there are more records than will fit on one page, the pager is shown. #}
		{{ pager() }}

	</div>
</main>

{% endblock main %}